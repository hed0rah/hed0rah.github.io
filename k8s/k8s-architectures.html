<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>K8s Architecture Variants</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Bebas+Neue&display=swap');

  :root {
    /* Kill ENGN + perceptron brutalist palette */
    --bg:       #0a0a0a;
    --surface:  #111111;
    --border:   #1e1e1e;
    --border2:  #2a2a2a;
    --cyan:     #00ffe9;   /* Kill ENGN teal */
    --green:    #39ff14;
    --yellow:   #ffe900;   /* Kill ENGN yellow */
    --red:      #ff2d55;
    --purple:   #e900ff;   /* Kill ENGN magenta */
    --orange:   #ff9500;
    --text:     #cccccc;
    --text2:    #666666;
    --text3:    #3a3a3a;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Space Mono', monospace;
    font-size: 14px;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* scanline overlay */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,0,0,0.03) 2px,
      rgba(0,0,0,0.03) 4px
    );
    pointer-events: none;
    z-index: 1000;
  }

  header {
    padding: 24px 48px 18px;
    border-bottom: 1px solid var(--border);
    border-left: 4px solid var(--cyan);
    display: flex;
    align-items: flex-end;
    gap: 24px;
  }

  h1 {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 52px;
    letter-spacing: 3px;
    color: var(--cyan);
    line-height: 1;
    text-shadow: 0 0 30px rgba(0,255,233,0.35);
  }

  .subtitle {
    font-family: 'Space Mono', monospace;
    font-size: 11px;
    color: var(--text3);
    letter-spacing: 1px;
    padding-bottom: 6px;
  }

  /* tabs */
  .tabs {
    display: flex;
    gap: 0;
    padding: 0 48px;
    border-bottom: 1px solid var(--border);
    overflow-x: auto;
  }

  .tab {
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    letter-spacing: 1px;
    padding: 14px 20px;
    cursor: pointer;
    color: var(--text3);
    border-bottom: 2px solid transparent;
    white-space: nowrap;
    transition: all 0.15s;
    text-transform: uppercase;
    position: relative;
  }

  .tab:hover { color: var(--text2); }

  .tab.active {
    color: var(--cyan);
    border-bottom: 3px solid var(--cyan);
  }

  .tab .badge {
    display: inline-block;
    margin-left: 6px;
    padding: 1px 5px;
    border-radius: 2px;
    font-size: 9px;
    vertical-align: middle;
  }

  /* main layout */
  .main {
    display: grid;
    grid-template-columns: 1fr 360px;
    gap: 0;
    height: calc(100vh - 141px);
  }

  /* diagram pane */
  .diagram-pane {
    padding: 32px 40px;
    overflow-y: auto;
    border-right: 1px solid var(--border);
  }

  .arch-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 32px;
    letter-spacing: 2px;
    margin-bottom: 6px;
  }

  .arch-desc {
    font-size: 11px;
    color: var(--text2);
    line-height: 1.6;
    margin-bottom: 28px;
    max-width: 600px;
  }

  /* diagram canvas */
  .diagram {
    position: relative;
    width: 100%;
  }

  svg.arch-svg {
    width: 100%;
    height: auto;
    overflow: visible;
  }

  /* info pane */
  .info-pane {
    padding: 28px 28px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .info-section {
    border: 1px solid var(--border);
    border-radius: 0;
    border-left: 3px solid var(--border2);
    overflow: hidden;
  }

  .info-section-head {
    padding: 8px 14px;
    font-family: 'Space Mono', monospace;
    font-size: 9px;
    letter-spacing: 2px;
    text-transform: uppercase;
    background: var(--surface);
    color: var(--text2);
    border-bottom: 1px solid var(--border);
  }

  .info-section-body {
    padding: 14px;
  }

  .prop-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
    border-bottom: 1px solid var(--border);
    font-size: 12px;
  }

  .prop-row:last-child { border-bottom: none; }

  .prop-key {
    color: var(--text2);
    font-family: 'Space Mono', monospace;
    font-size: 10px;
  }

  .prop-val {
    font-weight: 500;
    text-align: right;
  }

  .tag {
    display: inline-block;
    padding: 2px 7px;
    border-radius: 2px;
    font-family: 'Space Mono', monospace;
    font-size: 9px;
    letter-spacing: 0.5px;
    font-weight: 700;
    text-transform: uppercase;
  }

  .tag-green  { background: rgba(57,255,20,0.10); color: var(--green); border: 1px solid rgba(57,255,20,0.3); }
  .tag-red    { background: rgba(255,45,85,0.12); color: var(--red); border: 1px solid rgba(255,45,85,0.3); }
  .tag-yellow { background: rgba(255,233,0,0.10); color: var(--yellow); border: 1px solid rgba(255,233,0,0.3); }
  .tag-cyan   { background: rgba(0,255,233,0.08); color: var(--cyan); border: 1px solid rgba(0,255,233,0.3); }
  .tag-purple { background: rgba(233,0,255,0.10); color: var(--purple); border: 1px solid rgba(233,0,255,0.3); }
  .tag-orange { background: rgba(255,149,0,0.10); color: var(--orange); border: 1px solid rgba(255,149,0,0.3); }

  .note-list { list-style: none; }
  .note-list li {
    padding: 5px 0;
    padding-left: 14px;
    position: relative;
    font-size: 12px;
    color: var(--text2);
    line-height: 1.5;
    border-bottom: 1px solid var(--border);
  }
  .note-list li:last-child { border-bottom: none; }
  .note-list li::before {
    content: '//';
    position: absolute;
    left: 0;
    color: var(--border2);
    font-family: 'Space Mono', monospace;
    font-size: 9px;
  }

  .use-case-list { list-style: none; }
  .use-case-list li {
    padding: 5px 0;
    padding-left: 14px;
    position: relative;
    font-size: 12px;
    color: var(--text);
    line-height: 1.5;
    border-bottom: 1px solid var(--border);
  }
  .use-case-list li:last-child { border-bottom: none; }
  .use-case-list li::before {
    content: '>';
    position: absolute;
    left: 0;
    color: var(--cyan);
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    font-weight: 700;
  }

  /* hidden panels */
  .arch-panel { display: none; }
  .arch-panel.active { display: block; }

  /* node tooltips */
  .node-label {
    cursor: pointer;
    transition: opacity 0.15s;
  }
  .node-label:hover { opacity: 0.85; }

  /* component legend */
  .legend {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 20px;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    color: var(--text2);
  }

  .legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 0;
  }

  /* pulse animation for active nodes */
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  .pulse { animation: pulse 2s ease-in-out infinite; }

  @keyframes flow {
    0% { stroke-dashoffset: 20; }
    100% { stroke-dashoffset: 0; }
  }

  .flow-line {
    stroke-dasharray: 4 4;
    animation: flow 1s linear infinite;
  }

  @keyframes fadein {
    from { opacity: 0; transform: translateY(8px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .arch-panel.active { animation: fadein 0.2s ease; }
</style>
</head>
<body>

<header>
  <div>
    <h1>K8S ARCH VARIANTS</h1>
    <div class="subtitle">// kubernetes + k3s + rancher + argocd deployment patterns</div>
  </div>
</header>

<div class="tabs" id="tabs"></div>

<div class="main">
  <div class="diagram-pane" id="diagramPane"></div>
  <div class="info-pane" id="infoPane"></div>
</div>

<script>
// ---- DATA ----

const archs = [

  {
    id: 'minimal',
    label: 'Minimal k3s',
    badge: { text: 'simple', color: 'green' },
    title: 'Minimal k3s',
    desc: 'Single-node k3s with Traefik ingress. No GitOps, no registry. You kubectl apply manually. The baseline -- what ersatz is running right now.',
    props: [
      { k: 'nodes',       v: '1',            tag: null },
      { k: 'gitops',      v: 'none',         tag: 'red' },
      { k: 'registry',    v: 'Docker Hub',   tag: null },
      { k: 'ingress',     v: 'Traefik',      tag: 'cyan' },
      { k: 'management',  v: 'kubectl',      tag: null },
      { k: 'complexity',  v: 'low',          tag: 'green' },
    ],
    useCases: [
      'Local dev and lab work',
      'Single-person projects',
      'Learning Kubernetes',
      'Quick prototypes',
    ],
    notes: [
      'No audit trail for changes',
      'No drift detection',
      'Rate limited by Docker Hub',
      'Manual rollbacks',
      'Fine for what it is',
    ],
    svg: `
      <svg class="arch-svg" viewBox="0 0 700 380">
        <!-- internet -->
        <rect x="270" y="10" width="160" height="44" rx="4" fill="none" stroke="#2a2f3a" stroke-width="1.5"/>
        <text x="350" y="28" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="10">INTERNET</text>
        <text x="350" y="44" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">docker.io / ghcr.io</text>

        <!-- arrow down -->
        <line x1="350" y1="54" x2="350" y2="80" stroke="#2a2f3a" stroke-width="1.5" marker-end="url(#arr)"/>

        <!-- user box -->
        <rect x="270" y="80" width="160" height="40" rx="4" fill="#111318" stroke="#2a2f3a" stroke-width="1.5"/>
        <text x="350" y="96" text-anchor="middle" fill="#e8eaf0" font-family="Space Mono" font-size="10">DEVELOPER</text>
        <text x="350" y="111" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">kubectl apply</text>

        <!-- arrow to node -->
        <line x1="350" y1="120" x2="350" y2="152" stroke="#00ffe9" stroke-width="1.5" stroke-dasharray="4 4" marker-end="url(#arr-cyan)"/>
        <text x="358" y="140" fill="#4a5260" font-family="Space Mono" font-size="9">apply</text>

        <!-- k3s node box -->
        <rect x="60" y="152" width="580" height="200" rx="6" fill="none" stroke="#1e2229" stroke-width="1.5"/>
        <text x="76" y="172" fill="#4a5260" font-family="Space Mono" font-size="9" letter-spacing="1">K3S NODE // 192.168.1.187</text>

        <!-- traefik -->
        <rect x="90" y="185" width="130" height="50" rx="4" fill="#0d1212" stroke="#00ffe9" stroke-width="1.5"/>
        <text x="155" y="207" text-anchor="middle" fill="#00ffe9" font-family="Space Mono" font-size="10" font-weight="700">TRAEFIK</text>
        <text x="155" y="224" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">:80 / :443</text>

        <!-- coredns -->
        <rect x="250" y="185" width="130" height="50" rx="4" fill="#111318" stroke="#2a2f3a" stroke-width="1.5"/>
        <text x="315" y="207" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="10">COREDNS</text>
        <text x="315" y="224" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">cluster DNS</text>

        <!-- local path -->
        <rect x="410" y="185" width="130" height="50" rx="4" fill="#111318" stroke="#2a2f3a" stroke-width="1.5"/>
        <text x="475" y="207" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="10">LOCAL-PATH</text>
        <text x="475" y="224" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">storage</text>

        <!-- workloads -->
        <rect x="90" y="265" width="500" height="68" rx="4" fill="#0e1115" stroke="#1e2229" stroke-width="1"/>
        <text x="106" y="282" fill="#4a5260" font-family="Space Mono" font-size="9">WORKLOADS</text>

        <rect x="106" y="290" width="90" height="34" rx="3" fill="#111318" stroke="#2a2f3a" stroke-width="1"/>
        <text x="151" y="312" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="10">nginx</text>

        <rect x="206" y="290" width="90" height="34" rx="3" fill="#111318" stroke="#2a2f3a" stroke-width="1"/>
        <text x="251" y="312" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="10">demo-app</text>

        <!-- arrow from traefik to workloads -->
        <line x1="155" y1="235" x2="155" y2="265" stroke="#2a2f3a" stroke-width="1" stroke-dasharray="3 3"/>

        <!-- defs -->
        <defs>
          <marker id="arr" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#2a2f3a"/>
          </marker>
          <marker id="arr-cyan" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#00ffe9"/>
          </marker>
        </defs>
      </svg>
    `,
  },

  {
    id: 'with-registry',
    label: 'k3s + Private Registry',
    badge: { text: 'recommended', color: 'green' },
    title: 'k3s + Private Registry',
    desc: 'Adds a private container registry inside (or adjacent to) the cluster. Images are built and pushed locally, then pulled without hitting Docker Hub. Still manual deploys but no rate limits and faster pulls.',
    props: [
      { k: 'nodes',       v: '1',            tag: null },
      { k: 'gitops',      v: 'none',         tag: 'red' },
      { k: 'registry',    v: 'private',      tag: 'cyan' },
      { k: 'ingress',     v: 'Traefik',      tag: 'cyan' },
      { k: 'management',  v: 'kubectl',      tag: null },
      { k: 'complexity',  v: 'low-medium',   tag: 'yellow' },
    ],
    useCases: [
      'Air-gapped or restricted networks',
      'Avoiding Docker Hub rate limits',
      'Faster image pulls on slow uplinks',
      'Lab environments with custom images',
      'This is what ersatz has now',
    ],
    notes: [
      'Registry runs on :32000 NodePort',
      'containerd registries.yaml points at it',
      'Images pushed from dev machine',
      'Still no drift detection or audit trail',
    ],
    svg: `
      <svg class="arch-svg" viewBox="0 0 740 420">
        <defs>
          <marker id="arr2" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#2a2f3a"/>
          </marker>
          <marker id="arr2-cyan" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#00ffe9"/>
          </marker>
          <marker id="arr2-green" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#39ff14"/>
          </marker>
        </defs>

        <!-- developer -->
        <rect x="20" y="10" width="160" height="44" rx="4" fill="#111318" stroke="#2a2f3a" stroke-width="1.5"/>
        <text x="100" y="28" text-anchor="middle" fill="#e8eaf0" font-family="Space Mono" font-size="10">DEVELOPER</text>
        <text x="100" y="44" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">docker build + push</text>

        <!-- push arrow to registry -->
        <path d="M180 32 Q290 32 290 80" fill="none" stroke="#39ff14" stroke-width="1.5" stroke-dasharray="4 3" marker-end="url(#arr2-green)"/>
        <text x="240" y="50" fill="#39ff14" font-family="Space Mono" font-size="9">push</text>

        <!-- kubectl apply arrow -->
        <line x1="100" y1="54" x2="100" y2="130" stroke="#00ffe9" stroke-width="1.5" stroke-dasharray="4 3" marker-end="url(#arr2-cyan)"/>
        <text x="108" y="100" fill="#00ffe9" font-family="Space Mono" font-size="9">kubectl apply</text>

        <!-- k3s node -->
        <rect x="60" y="130" width="660" height="270" rx="6" fill="none" stroke="#1e2229" stroke-width="1.5"/>
        <text x="76" y="150" fill="#4a5260" font-family="Space Mono" font-size="9" letter-spacing="1">K3S NODE</text>

        <!-- registry box (highlighted) -->
        <rect x="240" y="162" width="150" height="60" rx="4" fill="#0d1a14" stroke="#39ff14" stroke-width="2"/>
        <text x="315" y="186" text-anchor="middle" fill="#39ff14" font-family="Space Mono" font-size="10" font-weight="700">REGISTRY</text>
        <text x="315" y="202" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">:32000 NodePort</text>
        <text x="315" y="214" text-anchor="middle" fill="#2a5c35" font-family="Space Mono" font-size="9">local image store</text>

        <!-- traefik -->
        <rect x="80" y="162" width="130" height="60" rx="4" fill="#0d1212" stroke="#00ffe9" stroke-width="1.5"/>
        <text x="145" y="187" text-anchor="middle" fill="#00ffe9" font-family="Space Mono" font-size="10" font-weight="700">TRAEFIK</text>
        <text x="145" y="203" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">:80 / :443</text>
        <text x="145" y="215" text-anchor="middle" fill="#2a3a44" font-family="Space Mono" font-size="9">ingress controller</text>

        <!-- local path -->
        <rect x="420" y="162" width="130" height="60" rx="4" fill="#111318" stroke="#2a2f3a" stroke-width="1.5"/>
        <text x="485" y="187" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="10">LOCAL-PATH</text>
        <text x="485" y="203" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">storage provisioner</text>

        <!-- coredns -->
        <rect x="580" y="162" width="120" height="60" rx="4" fill="#111318" stroke="#2a2f3a" stroke-width="1.5"/>
        <text x="640" y="187" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="10">COREDNS</text>
        <text x="640" y="203" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">DNS</text>

        <!-- pull arrow from registry to workloads -->
        <line x1="315" y1="222" x2="315" y2="258" stroke="#39ff14" stroke-width="1.5" stroke-dasharray="3 3" marker-end="url(#arr2-green)"/>
        <text x="320" y="244" fill="#39ff14" font-family="Space Mono" font-size="9">pull</text>

        <!-- workloads -->
        <rect x="80" y="258" width="500" height="120" rx="4" fill="#0e1115" stroke="#1e2229" stroke-width="1"/>
        <text x="96" y="276" fill="#4a5260" font-family="Space Mono" font-size="9">WORKLOADS // pulling from internal registry</text>

        <rect x="96" y="284" width="100" height="40" rx="3" fill="#111318" stroke="#39ff14" stroke-width="1"/>
        <text x="146" y="300" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="10">nginx</text>
        <text x="146" y="315" text-anchor="middle" fill="#2a5c35" font-family="Space Mono" font-size="9">192.168.1.187:32000</text>

        <rect x="206" y="284" width="100" height="40" rx="3" fill="#111318" stroke="#39ff14" stroke-width="1"/>
        <text x="256" y="300" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="10">demo-app</text>
        <text x="256" y="315" text-anchor="middle" fill="#2a5c35" font-family="Space Mono" font-size="9">192.168.1.187:32000</text>

        <rect x="316" y="284" width="100" height="40" rx="3" fill="#111318" stroke="#2a2f3a" stroke-width="1"/>
        <text x="366" y="300" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="10">your-app</text>
        <text x="366" y="315" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">custom image</text>

        <!-- metrics server -->
        <rect x="80" y="334" width="500" height="30" rx="3" fill="none" stroke="#1e2229" stroke-width="1"/>
        <text x="330" y="354" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">metrics-server // svclb-traefik // local-path-provisioner</text>

        <!-- traefik arrow to workloads -->
        <line x1="145" y1="222" x2="145" y2="258" stroke="#2a2f3a" stroke-width="1" stroke-dasharray="3 3"/>
      </svg>
    `,
  },

  {
    id: 'argocd',
    label: 'k3s + ArgoCD',
    badge: { text: 'gitops', color: 'purple' },
    title: 'k3s + ArgoCD (GitOps)',
    desc: 'Adds GitOps via ArgoCD. Your manifests live in a Git repo. ArgoCD watches for changes and syncs them to the cluster automatically. Drift detection, audit trail, rollback via git revert. This is what ersatz runs today.',
    props: [
      { k: 'nodes',       v: '1',            tag: null },
      { k: 'gitops',      v: 'ArgoCD',       tag: 'purple' },
      { k: 'registry',    v: 'private',      tag: 'cyan' },
      { k: 'ingress',     v: 'Traefik',      tag: 'cyan' },
      { k: 'management',  v: 'git commit',   tag: 'purple' },
      { k: 'complexity',  v: 'medium',       tag: 'yellow' },
    ],
    useCases: [
      'Teams where multiple people deploy',
      'Audit trail requirements',
      'Regulated environments',
      'When you want to stop kubectl-ing prod',
      'The right next step after ersatz',
    ],
    notes: [
      'Git commit = deployment trigger',
      'Auto-sync + self-heal reverts manual changes',
      'argocd-server exposed on :32085/:32217',
      'App-of-apps pattern for multi-service stacks',
      'Still single node -- no HA',
    ],
    svg: `
      <svg class="arch-svg" viewBox="0 0 760 480">
        <defs>
          <marker id="arr3" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#2a2f3a"/>
          </marker>
          <marker id="arr3-purple" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#e900ff"/>
          </marker>
          <marker id="arr3-cyan" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#00ffe9"/>
          </marker>
          <marker id="arr3-green" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#39ff14"/>
          </marker>
        </defs>

        <!-- git repo (external) -->
        <rect x="10" y="10" width="150" height="50" rx="4" fill="#120a12" stroke="#e900ff" stroke-width="1.5"/>
        <text x="85" y="30" text-anchor="middle" fill="#e900ff" font-family="Space Mono" font-size="10" font-weight="700">GIT REPO</text>
        <text x="85" y="46" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">github / gitlab / gitea</text>

        <!-- developer -->
        <rect x="580" y="10" width="160" height="50" rx="4" fill="#111318" stroke="#2a2f3a" stroke-width="1.5"/>
        <text x="660" y="30" text-anchor="middle" fill="#e8eaf0" font-family="Space Mono" font-size="10">DEVELOPER</text>
        <text x="660" y="46" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">git push = deploy</text>

        <!-- dev -> git -->
        <line x1="580" y1="35" x2="170" y2="35" stroke="#e900ff" stroke-width="1.5" stroke-dasharray="4 3" marker-end="url(#arr3-purple)"/>
        <text x="370" y="28" text-anchor="middle" fill="#e900ff" font-family="Space Mono" font-size="9">git commit + push</text>

        <!-- k3s node -->
        <rect x="30" y="100" width="700" height="360" rx="6" fill="none" stroke="#1e2229" stroke-width="1.5"/>
        <text x="46" y="120" fill="#4a5260" font-family="Space Mono" font-size="9" letter-spacing="1">K3S NODE</text>

        <!-- argocd namespace -->
        <rect x="46" y="130" width="330" height="160" rx="4" fill="#12101a" stroke="#e900ff" stroke-width="1" stroke-dasharray="4 2"/>
        <text x="58" y="148" fill="#e900ff" font-family="Space Mono" font-size="9" letter-spacing="1">ns: argocd</text>

        <!-- argocd app controller -->
        <rect x="58" y="156" width="140" height="50" rx="3" fill="#120a12" stroke="#e900ff" stroke-width="1.5"/>
        <text x="128" y="176" text-anchor="middle" fill="#e900ff" font-family="Space Mono" font-size="9" font-weight="700">APP-CONTROLLER</text>
        <text x="128" y="192" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">reconcile loop</text>

        <!-- argocd server -->
        <rect x="210" y="156" width="140" height="50" rx="3" fill="#120a12" stroke="#e900ff" stroke-width="1.5"/>
        <text x="280" y="176" text-anchor="middle" fill="#e900ff" font-family="Space Mono" font-size="9" font-weight="700">ARGOCD-SERVER</text>
        <text x="280" y="192" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">UI + API :32085</text>

        <!-- argocd repo server -->
        <rect x="58" y="218" width="140" height="50" rx="3" fill="#120a12" stroke="#e900ff" stroke-width="1.5"/>
        <text x="128" y="238" text-anchor="middle" fill="#e900ff" font-family="Space Mono" font-size="9" font-weight="700">REPO-SERVER</text>
        <text x="128" y="254" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">clones + renders</text>

        <!-- argocd redis -->
        <rect x="210" y="218" width="140" height="50" rx="3" fill="#120a12" stroke="#e900ff" stroke-width="1"/>
        <text x="280" y="238" text-anchor="middle" fill="#7a4ccc" font-family="Space Mono" font-size="9">REDIS</text>
        <text x="280" y="254" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">cache</text>

        <!-- argocd watches git -->
        <path d="M58 181 Q20 181 20 35 Q20 10 85 35" fill="none" stroke="#e900ff" stroke-width="1.5" stroke-dasharray="4 3" marker-end="url(#arr3-purple)"/>
        <text x="12" y="110" fill="#e900ff" font-family="Space Mono" font-size="8">watches</text>

        <!-- argocd syncs to workloads -->
        <line x1="211" y1="181" x2="420" y2="181" stroke="#e900ff" stroke-width="1.5" stroke-dasharray="3 3" marker-end="url(#arr3-purple)"/>
        <text x="300" y="174" fill="#e900ff" font-family="Space Mono" font-size="8">sync</text>

        <!-- kube-system namespace -->
        <rect x="46" y="302" width="680" height="60" rx="4" fill="#0d1015" stroke="#1e2229" stroke-width="1" stroke-dasharray="4 2"/>
        <text x="58" y="320" fill="#4a5260" font-family="Space Mono" font-size="9" letter-spacing="1">ns: kube-system</text>
        <rect x="58" y="328" width="90" height="26" rx="2" fill="#111318" stroke="#2a2f3a"/>
        <text x="103" y="345" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">traefik</text>
        <rect x="158" y="328" width="90" height="26" rx="2" fill="#111318" stroke="#2a2f3a"/>
        <text x="203" y="345" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">coredns</text>
        <rect x="258" y="328" width="90" height="26" rx="2" fill="#111318" stroke="#2a2f3a"/>
        <text x="303" y="345" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">registry</text>
        <rect x="358" y="328" width="90" height="26" rx="2" fill="#111318" stroke="#2a2f3a"/>
        <text x="403" y="345" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">local-path</text>
        <rect x="458" y="328" width="110" height="26" rx="2" fill="#111318" stroke="#2a2f3a"/>
        <text x="513" y="345" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">metrics-server</text>

        <!-- demo namespace -->
        <rect x="420" y="130" width="310" height="160" rx="4" fill="#0e1115" stroke="#1e2229" stroke-width="1" stroke-dasharray="4 2"/>
        <text x="432" y="148" fill="#4a5260" font-family="Space Mono" font-size="9" letter-spacing="1">ns: demo // managed by argocd</text>

        <rect x="432" y="156" width="120" height="50" rx="3" fill="#111318" stroke="#2a2f3a" stroke-width="1"/>
        <text x="492" y="176" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">nginx</text>
        <text x="492" y="192" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">2 replicas</text>

        <rect x="564" y="156" width="120" height="50" rx="3" fill="#111318" stroke="#2a2f3a" stroke-width="1"/>
        <text x="624" y="176" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">demo-app</text>
        <text x="624" y="192" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">2 replicas</text>

        <rect x="432" y="218" width="252" height="50" rx="3" fill="#0a100e" stroke="#39ff14" stroke-width="1" stroke-dasharray="3 2"/>
        <text x="558" y="238" text-anchor="middle" fill="#39ff14" font-family="Space Mono" font-size="9">managed by argocd</text>
        <text x="558" y="254" text-anchor="middle" fill="#2a5c35" font-family="Space Mono" font-size="8">git state = cluster state</text>

        <!-- drift indicator -->
        <rect x="46" y="375" width="680" height="72" rx="4" fill="none" stroke="#1e2229" stroke-width="1"/>
        <text x="62" y="394" fill="#4a5260" font-family="Space Mono" font-size="9">ARGOCD SYNC STATUS</text>
        <rect x="62" y="402" width="120" height="36" rx="3" fill="#0a1a0a" stroke="#39ff14" stroke-width="1"/>
        <text x="122" y="420" text-anchor="middle" fill="#39ff14" font-family="Space Mono" font-size="9" font-weight="700">SYNCED</text>
        <text x="122" y="433" text-anchor="middle" fill="#2a5c35" font-family="Space Mono" font-size="8">git == cluster</text>

        <rect x="192" y="402" width="120" height="36" rx="3" fill="#1a1000" stroke="#ffe900" stroke-width="1"/>
        <text x="252" y="420" text-anchor="middle" fill="#ffe900" font-family="Space Mono" font-size="9" font-weight="700">OUT OF SYNC</text>
        <text x="252" y="433" text-anchor="middle" fill="#5c4a00" font-family="Space Mono" font-size="8">drift detected</text>

        <rect x="322" y="402" width="120" height="36" rx="3" fill="#1a0a0a" stroke="#ff2d55" stroke-width="1"/>
        <text x="382" y="420" text-anchor="middle" fill="#ff2d55" font-family="Space Mono" font-size="9" font-weight="700">DEGRADED</text>
        <text x="382" y="433" text-anchor="middle" fill="#5c001a" font-family="Space Mono" font-size="8">pod failing</text>

        <rect x="452" y="402" width="120" height="36" rx="3" fill="#100a1a" stroke="#e900ff" stroke-width="1"/>
        <text x="512" y="420" text-anchor="middle" fill="#e900ff" font-family="Space Mono" font-size="9" font-weight="700">PROGRESSING</text>
        <text x="512" y="433" text-anchor="middle" fill="#3a1a5c" font-family="Space Mono" font-size="8">rolling update</text>
      </svg>
    `,
  },

  {
    id: 'stub-registry',
    label: 'k3s + Stub Registry',
    badge: { text: 'lab/ci', color: 'orange' },
    title: 'k3s + Stub Registry (Lab / CI)',
    desc: 'The registry is stubbed out -- pre-loaded with a fixed set of images, no internet access, returns controlled responses. Used for testing, CI pipelines, and air-gapped lab environments where you need reproducible image pulls without a real upstream.',
    props: [
      { k: 'nodes',       v: '1-N',          tag: null },
      { k: 'gitops',      v: 'optional',     tag: 'yellow' },
      { k: 'registry',    v: 'stub / mirror',tag: 'orange' },
      { k: 'internet',    v: 'not required', tag: 'green' },
      { k: 'management',  v: 'varies',       tag: null },
      { k: 'complexity',  v: 'medium',       tag: 'yellow' },
    ],
    useCases: [
      'CI/CD pipelines (no internet in runner)',
      'Regulated / air-gapped networks',
      'Testing image pull failure scenarios',
      'Reproducing exact image sets across envs',
      'Lab setups that mirror production image sets',
    ],
    notes: [
      'Images pre-loaded via docker save/load or sync tool',
      'containerd mirrors config points at stub',
      'Real registry.io calls go nowhere / are blocked',
      'Known-good image set = reproducible builds',
      'Stub can return 404/503 to test error paths',
    ],
    svg: `
      <svg class="arch-svg" viewBox="0 0 760 440">
        <defs>
          <marker id="arr4" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#2a2f3a"/>
          </marker>
          <marker id="arr4-orange" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#ff8c42"/>
          </marker>
          <marker id="arr4-red" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#ff2d55"/>
          </marker>
          <marker id="arr4-cyan" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#00ffe9"/>
          </marker>
        </defs>

        <!-- internet (blocked) -->
        <rect x="280" y="10" width="200" height="50" rx="4" fill="#1a0a0a" stroke="#ff2d55" stroke-width="1.5" stroke-dasharray="4 2"/>
        <text x="380" y="30" text-anchor="middle" fill="#ff2d55" font-family="Space Mono" font-size="10">INTERNET</text>
        <text x="380" y="46" text-anchor="middle" fill="#5c001a" font-family="Space Mono" font-size="9">docker.io / ghcr.io -- BLOCKED</text>

        <!-- X marks -->
        <line x1="360" y1="68" x2="350" y2="88" stroke="#ff2d55" stroke-width="2"/>
        <line x1="340" y1="68" x2="350" y2="88" stroke="#ff2d55" stroke-width="2"/>
        <text x="380" y="82" fill="#ff2d55" font-family="Space Mono" font-size="10">no route</text>

        <!-- image loader (offline) -->
        <rect x="10" y="10" width="190" height="50" rx="4" fill="#1a1200" stroke="#ff8c42" stroke-width="1.5"/>
        <text x="105" y="28" text-anchor="middle" fill="#ff8c42" font-family="Space Mono" font-size="10" font-weight="700">OFFLINE LOADER</text>
        <text x="105" y="44" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">docker save | docker load</text>

        <!-- loader arrow to stub registry -->
        <path d="M105 60 Q105 140 200 140" fill="none" stroke="#ff8c42" stroke-width="1.5" marker-end="url(#arr4-orange)"/>
        <text x="80" y="110" fill="#ff8c42" font-family="Space Mono" font-size="9">pre-load images</text>

        <!-- k3s node -->
        <rect x="30" y="100" width="700" height="330" rx="6" fill="none" stroke="#1e2229" stroke-width="1.5"/>
        <text x="46" y="120" fill="#4a5260" font-family="Space Mono" font-size="9" letter-spacing="1">K3S NODE(S) // air-gapped</text>

        <!-- stub registry box -->
        <rect x="150" y="130" width="200" height="80" rx="4" fill="#1a1200" stroke="#ff8c42" stroke-width="2"/>
        <text x="250" y="155" text-anchor="middle" fill="#ff8c42" font-family="Space Mono" font-size="10" font-weight="700">STUB REGISTRY</text>
        <text x="250" y="171" text-anchor="middle" fill="#5c3a00" font-family="Space Mono" font-size="9">pre-loaded image set</text>
        <text x="250" y="187" text-anchor="middle" fill="#5c3a00" font-family="Space Mono" font-size="9">no upstream / controlled responses</text>
        <text x="250" y="203" text-anchor="middle" fill="#ff8c42" font-family="Space Mono" font-size="8">registry.local:5000</text>

        <!-- containerd mirrors config -->
        <rect x="390" y="130" width="310" height="80" rx="4" fill="#0d1015" stroke="#2a2f3a" stroke-width="1.5"/>
        <text x="545" y="152" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9" font-weight="700">CONTAINERD MIRRORS CONFIG</text>
        <text x="420" y="172" fill="#4a5260" font-family="Space Mono" font-size="9">mirrors:</text>
        <text x="430" y="187" fill="#4a5260" font-family="Space Mono" font-size="9">"docker.io":</text>
        <text x="440" y="202" fill="#ff8c42" font-family="Space Mono" font-size="9">endpoint: registry.local:5000</text>

        <!-- pull arrows from stub to workloads -->
        <line x1="250" y1="210" x2="250" y2="250" stroke="#ff8c42" stroke-width="1.5" stroke-dasharray="3 3" marker-end="url(#arr4-orange)"/>
        <text x="258" y="235" fill="#ff8c42" font-family="Space Mono" font-size="9">pull</text>

        <!-- workloads -->
        <rect x="50" y="250" width="640" height="160" rx="4" fill="#0e1115" stroke="#1e2229" stroke-width="1"/>
        <text x="66" y="268" fill="#4a5260" font-family="Space Mono" font-size="9">WORKLOADS // pulling from stub, not internet</text>

        <!-- image set table -->
        <rect x="66" y="276" width="290" height="120" rx="3" fill="#111318" stroke="#ff8c42" stroke-width="1"/>
        <text x="211" y="296" text-anchor="middle" fill="#ff8c42" font-family="Space Mono" font-size="9" font-weight="700">PRE-LOADED IMAGE SET</text>
        <line x1="66" y1="302" x2="356" y2="302" stroke="#1e2229" stroke-width="1"/>
        <text x="80" y="318" fill="#8892a0" font-family="Space Mono" font-size="9">nginx:1.25</text>
        <text x="80" y="334" fill="#8892a0" font-family="Space Mono" font-size="9">postgres:15</text>
        <text x="80" y="350" fill="#8892a0" font-family="Space Mono" font-size="9">redis:7</text>
        <text x="80" y="366" fill="#8892a0" font-family="Space Mono" font-size="9">my-org/app:2.0.0</text>
        <text x="200" y="318" fill="#4a5260" font-family="Space Mono" font-size="9">cached</text>
        <text x="200" y="334" fill="#4a5260" font-family="Space Mono" font-size="9">cached</text>
        <text x="200" y="350" fill="#4a5260" font-family="Space Mono" font-size="9">cached</text>
        <text x="200" y="366" fill="#4a5260" font-family="Space Mono" font-size="9">cached</text>

        <!-- what happens on miss -->
        <rect x="376" y="276" width="290" height="120" rx="3" fill="#1a0a0a" stroke="#ff2d55" stroke-width="1"/>
        <text x="521" y="296" text-anchor="middle" fill="#ff2d55" font-family="Space Mono" font-size="9" font-weight="700">ON CACHE MISS</text>
        <line x1="376" y1="302" x2="666" y2="302" stroke="#1e2229" stroke-width="1"/>
        <text x="390" y="320" fill="#8892a0" font-family="Space Mono" font-size="9">real stub:</text>
        <text x="390" y="336" fill="#ff2d55" font-family="Space Mono" font-size="8">returns 404 / ErrImagePull</text>
        <text x="390" y="355" fill="#8892a0" font-family="Space Mono" font-size="9">pull-through:</text>
        <text x="390" y="371" fill="#ff8c42" font-family="Space Mono" font-size="8">attempts upstream (if reachable)</text>
      </svg>
    `,
  },

  {
    id: 'rancher',
    label: 'Rancher + k3s',
    badge: { text: 'managed', color: 'cyan' },
    title: 'Rancher + k3s (Multi-cluster)',
    desc: 'Rancher sits above k3s and provides a management UI, RBAC, multi-cluster federation, and catalog-based app deployment. One Rancher instance can manage many k3s clusters. Common in enterprise lab setups.',
    props: [
      { k: 'clusters',    v: '1-N',          tag: null },
      { k: 'gitops',      v: 'optional',     tag: 'yellow' },
      { k: 'registry',    v: 'varies',       tag: null },
      { k: 'management',  v: 'Rancher UI',   tag: 'cyan' },
      { k: 'RBAC',        v: 'built-in',     tag: 'green' },
      { k: 'complexity',  v: 'high',         tag: 'red' },
    ],
    useCases: [
      'Managing multiple clusters from one place',
      'Teams needing RBAC and access control',
      'Enterprise lab setups',
      'Helm catalog / app deployment without CLI',
      'Hybrid cloud (on-prem + cloud clusters)',
    ],
    notes: [
      'Rancher itself runs in a k3s or RKE2 cluster',
      'Downstream clusters registered via agent',
      'Built-in monitoring (Prometheus/Grafana)',
      'Fleet for GitOps (alternative to ArgoCD)',
      'Heavy -- needs dedicated management cluster',
    ],
    svg: `
      <svg class="arch-svg" viewBox="0 0 760 500">
        <defs>
          <marker id="arr5" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#2a2f3a"/>
          </marker>
          <marker id="arr5-cyan" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#00ffe9"/>
          </marker>
          <marker id="arr5-green" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#39ff14"/>
          </marker>
        </defs>

        <!-- developer / ops -->
        <rect x="300" y="10" width="160" height="50" rx="4" fill="#111318" stroke="#2a2f3a" stroke-width="1.5"/>
        <text x="380" y="28" text-anchor="middle" fill="#e8eaf0" font-family="Space Mono" font-size="10">OPERATOR</text>
        <text x="380" y="44" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">browser / kubectl</text>

        <!-- rancher mgmt cluster -->
        <rect x="160" y="90" width="440" height="140" rx="6" fill="#0a0f0a" stroke="#00ffe9" stroke-width="2"/>
        <text x="176" y="112" fill="#00ffe9" font-family="Space Mono" font-size="9" letter-spacing="1">RANCHER MANAGEMENT CLUSTER (k3s or RKE2)</text>

        <!-- rancher server -->
        <rect x="200" y="120" width="160" height="90" rx="4" fill="#0d1212" stroke="#00ffe9" stroke-width="2"/>
        <text x="280" y="144" text-anchor="middle" fill="#00ffe9" font-family="Space Mono" font-size="10" font-weight="700">RANCHER</text>
        <text x="280" y="160" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">UI + API + auth</text>
        <text x="280" y="175" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">RBAC + catalog</text>
        <text x="280" y="190" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">cluster registry</text>

        <!-- fleet (optional gitops) -->
        <rect x="390" y="120" width="170" height="90" rx="4" fill="#0d1a20" stroke="#2a2f3a" stroke-width="1" stroke-dasharray="3 2"/>
        <text x="475" y="144" text-anchor="middle" fill="#4a8090" font-family="Space Mono" font-size="10">FLEET</text>
        <text x="475" y="160" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">GitOps (optional)</text>
        <text x="475" y="175" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">Rancher's alternative</text>
        <text x="475" y="190" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">to ArgoCD</text>

        <!-- operator -> rancher -->
        <line x1="380" y1="60" x2="310" y2="90" stroke="#00ffe9" stroke-width="1.5" stroke-dasharray="4 3" marker-end="url(#arr5-cyan)"/>

        <!-- downstream clusters -->
        <!-- cluster 1 -->
        <rect x="30" y="270" width="210" height="200" rx="6" fill="none" stroke="#1e2229" stroke-width="1.5"/>
        <text x="46" y="290" fill="#4a5260" font-family="Space Mono" font-size="9" letter-spacing="1">k3s CLUSTER A</text>
        <text x="46" y="304" fill="#2a5c35" font-family="Space Mono" font-size="8">lab / dev</text>

        <rect x="46" y="312" width="80" height="40" rx="3" fill="#111318" stroke="#2a2f3a"/>
        <text x="86" y="336" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">workloads</text>

        <rect x="146" y="312" width="80" height="40" rx="3" fill="#111318" stroke="#2a2f3a"/>
        <text x="186" y="336" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">traefik</text>

        <rect x="46" y="362" width="180" height="30" rx="3" fill="#0a1a0a" stroke="#39ff14" stroke-width="1"/>
        <text x="136" y="381" text-anchor="middle" fill="#39ff14" font-family="Space Mono" font-size="8">rancher-agent (connected)</text>

        <rect x="46" y="402" width="180" height="60" rx="3" fill="#0d1015" stroke="#2a2f3a"/>
        <text x="136" y="420" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">registry</text>
        <text x="136" y="436" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">stub or private</text>
        <text x="136" y="452" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">per-cluster</text>

        <!-- cluster 2 -->
        <rect x="275" y="270" width="210" height="200" rx="6" fill="none" stroke="#1e2229" stroke-width="1.5"/>
        <text x="291" y="290" fill="#4a5260" font-family="Space Mono" font-size="9" letter-spacing="1">k3s CLUSTER B</text>
        <text x="291" y="304" fill="#5c3a00" font-family="Space Mono" font-size="8">staging</text>

        <rect x="291" y="312" width="80" height="40" rx="3" fill="#111318" stroke="#2a2f3a"/>
        <text x="331" y="336" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">workloads</text>

        <rect x="391" y="312" width="80" height="40" rx="3" fill="#111318" stroke="#2a2f3a"/>
        <text x="431" y="336" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">argocd</text>

        <rect x="291" y="362" width="180" height="30" rx="3" fill="#0a1a0a" stroke="#39ff14" stroke-width="1"/>
        <text x="381" y="381" text-anchor="middle" fill="#39ff14" font-family="Space Mono" font-size="8">rancher-agent (connected)</text>

        <rect x="291" y="402" width="180" height="60" rx="3" fill="#0d1015" stroke="#2a2f3a"/>
        <text x="381" y="428" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">shared stub registry</text>

        <!-- cluster 3 -->
        <rect x="520" y="270" width="210" height="200" rx="6" fill="none" stroke="#1e2229" stroke-width="1.5"/>
        <text x="536" y="290" fill="#4a5260" font-family="Space Mono" font-size="9" letter-spacing="1">RKE2 CLUSTER C</text>
        <text x="536" y="304" fill="#3a0a5c" font-family="Space Mono" font-size="8">production</text>

        <rect x="536" y="312" width="80" height="40" rx="3" fill="#111318" stroke="#2a2f3a"/>
        <text x="576" y="336" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">workloads</text>

        <rect x="636" y="312" width="80" height="40" rx="3" fill="#111318" stroke="#2a2f3a"/>
        <text x="676" y="336" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">argocd</text>

        <rect x="536" y="362" width="180" height="30" rx="3" fill="#0a1a0a" stroke="#39ff14" stroke-width="1"/>
        <text x="626" y="381" text-anchor="middle" fill="#39ff14" font-family="Space Mono" font-size="8">rancher-agent (connected)</text>

        <rect x="536" y="402" width="180" height="60" rx="3" fill="#0d1015" stroke="#2a2f3a"/>
        <text x="626" y="428" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">private registry</text>

        <!-- rancher -> clusters -->
        <line x1="280" y1="230" x2="135" y2="270" stroke="#00ffe9" stroke-width="1.5" stroke-dasharray="3 3" marker-end="url(#arr5-cyan)"/>
        <line x1="330" y1="230" x2="380" y2="270" stroke="#00ffe9" stroke-width="1.5" stroke-dasharray="3 3" marker-end="url(#arr5-cyan)"/>
        <line x1="380" y1="230" x2="625" y2="270" stroke="#00ffe9" stroke-width="1.5" stroke-dasharray="3 3" marker-end="url(#arr5-cyan)"/>
        <text x="380" y="255" text-anchor="middle" fill="#00ffe9" font-family="Space Mono" font-size="9">manages</text>
      </svg>
    `,
  },

  {
    id: 'full-stack',
    label: 'Full Stack',
    badge: { text: 'production', color: 'red' },
    title: 'Full Production Stack',
    desc: 'Rancher managing multiple clusters, each with ArgoCD for GitOps, a shared stub/mirror registry, monitoring, and proper RBAC. The full enterprise pattern. High complexity, high capability.',
    props: [
      { k: 'clusters',    v: 'many',         tag: null },
      { k: 'gitops',      v: 'ArgoCD',       tag: 'purple' },
      { k: 'registry',    v: 'mirror + stub', tag: 'orange' },
      { k: 'management',  v: 'Rancher',      tag: 'cyan' },
      { k: 'monitoring',  v: 'Prometheus',   tag: 'green' },
      { k: 'complexity',  v: 'high',         tag: 'red' },
    ],
    useCases: [
      'Enterprise on-prem Kubernetes',
      'Dev / staging / prod pipeline',
      'Air-gapped regulated environments',
      'Multi-team, multi-cluster ops',
      'Where you are heading at work',
    ],
    notes: [
      'Git is the single source of truth',
      'Rancher for visibility and access control',
      'ArgoCD per-cluster for sync',
      'Stub registry ensures reproducibility',
      'Monitoring stack in each cluster',
      'Each layer adds operational overhead',
    ],
    svg: `
      <svg class="arch-svg" viewBox="0 0 760 540">
        <defs>
          <marker id="arr6" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#2a2f3a"/>
          </marker>
          <marker id="arr6-cyan" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#00ffe9"/>
          </marker>
          <marker id="arr6-purple" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#e900ff"/>
          </marker>
          <marker id="arr6-orange" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#ff8c42"/>
          </marker>
          <marker id="arr6-green" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
            <path d="M0,0 L0,6 L8,3 z" fill="#39ff14"/>
          </marker>
        </defs>

        <!-- row 1: git + rancher + registry -->
        <!-- git -->
        <rect x="10" y="10" width="140" height="50" rx="4" fill="#120a12" stroke="#e900ff" stroke-width="1.5"/>
        <text x="80" y="30" text-anchor="middle" fill="#e900ff" font-family="Space Mono" font-size="10" font-weight="700">GIT REPO</text>
        <text x="80" y="46" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">source of truth</text>

        <!-- rancher -->
        <rect x="290" y="10" width="180" height="50" rx="4" fill="#0d1212" stroke="#00ffe9" stroke-width="2"/>
        <text x="380" y="30" text-anchor="middle" fill="#00ffe9" font-family="Space Mono" font-size="10" font-weight="700">RANCHER</text>
        <text x="380" y="46" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">mgmt cluster // RBAC // UI</text>

        <!-- stub registry -->
        <rect x="590" y="10" width="160" height="50" rx="4" fill="#1a1200" stroke="#ff8c42" stroke-width="1.5"/>
        <text x="670" y="30" text-anchor="middle" fill="#ff8c42" font-family="Space Mono" font-size="10" font-weight="700">STUB REGISTRY</text>
        <text x="670" y="46" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">air-gapped image store</text>

        <!-- dev -->
        <rect x="160" y="10" width="120" height="50" rx="4" fill="#111318" stroke="#2a2f3a" stroke-width="1.5"/>
        <text x="220" y="28" text-anchor="middle" fill="#e8eaf0" font-family="Space Mono" font-size="9">DEVELOPER</text>
        <text x="220" y="44" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">git push</text>

        <!-- arrows top level -->
        <line x1="150" y1="35" x2="160" y2="35" stroke="#e900ff" stroke-width="1" stroke-dasharray="3 2"/>
        <line x1="280" y1="35" x2="290" y2="35" stroke="#00ffe9" stroke-width="1" stroke-dasharray="3 2"/>
        <line x1="480" y1="35" x2="590" y2="35" stroke="#ff8c42" stroke-width="1" stroke-dasharray="3 2"/>

        <!-- connecting bar -->
        <line x1="380" y1="60" x2="380" y2="80" stroke="#00ffe9" stroke-width="1.5"/>
        <line x1="80" y1="60" x2="80" y2="80" stroke="#e900ff" stroke-width="1.5"/>
        <line x1="670" y1="60" x2="670" y2="80" stroke="#ff8c42" stroke-width="1.5"/>
        <line x1="80" y1="80" x2="670" y2="80" stroke="#1e2229" stroke-width="1"/>

        <!-- 3 clusters below -->
        <!-- cluster dev -->
        <line x1="160" y1="80" x2="160" y2="100" stroke="#1e2229" stroke-width="1"/>

        <rect x="30" y="100" width="220" height="420" rx="6" fill="none" stroke="#1e2229" stroke-width="1.5"/>
        <text x="46" y="118" fill="#4a5260" font-family="Space Mono" font-size="9" letter-spacing="1">CLUSTER: DEV</text>

        <rect x="46" y="124" width="188" height="50" rx="3" fill="#120a12" stroke="#e900ff" stroke-width="1"/>
        <text x="140" y="144" text-anchor="middle" fill="#e900ff" font-family="Space Mono" font-size="9" font-weight="700">ARGOCD</text>
        <text x="140" y="160" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">watches git main branch</text>

        <rect x="46" y="184" width="188" height="50" rx="3" fill="#111318" stroke="#2a2f3a" stroke-width="1"/>
        <text x="140" y="204" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">TRAEFIK</text>
        <text x="140" y="220" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">ingress</text>

        <rect x="46" y="244" width="188" height="70" rx="3" fill="#0e1115" stroke="#1e2229" stroke-width="1"/>
        <text x="140" y="264" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">WORKLOADS</text>
        <rect x="56" y="272" width="78" height="34" rx="2" fill="#111318" stroke="#2a2f3a"/>
        <text x="95" y="292" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">app-v2.1</text>
        <rect x="144" y="272" width="78" height="34" rx="2" fill="#111318" stroke="#2a2f3a"/>
        <text x="183" y="292" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">api-dev</text>

        <rect x="46" y="324" width="188" height="40" rx="3" fill="#0d1015" stroke="#ff8c42" stroke-width="1"/>
        <text x="140" y="348" text-anchor="middle" fill="#ff8c42" font-family="Space Mono" font-size="8">pulls from stub registry</text>

        <rect x="46" y="374" width="188" height="40" rx="3" fill="#0d1015" stroke="#2a2f3a" stroke-width="1"/>
        <text x="140" y="390" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">monitoring</text>
        <text x="140" y="406" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">prometheus + grafana</text>

        <rect x="46" y="424" width="188" height="30" rx="3" fill="#0a1a0a" stroke="#39ff14" stroke-width="1"/>
        <text x="140" y="443" text-anchor="middle" fill="#39ff14" font-family="Space Mono" font-size="8">rancher-agent</text>

        <rect x="46" y="464" width="188" height="46" rx="3" fill="#0d1015" stroke="#2a2f3a" stroke-width="1"/>
        <text x="140" y="481" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">local-path / storage</text>
        <text x="140" y="497" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">coredns</text>

        <!-- cluster staging -->
        <line x1="380" y1="80" x2="380" y2="100" stroke="#1e2229" stroke-width="1"/>

        <rect x="270" y="100" width="220" height="420" rx="6" fill="none" stroke="#2a2515" stroke-width="1.5"/>
        <text x="286" y="118" fill="#5c4a00" font-family="Space Mono" font-size="9" letter-spacing="1">CLUSTER: STAGING</text>

        <rect x="286" y="124" width="188" height="50" rx="3" fill="#120a12" stroke="#e900ff" stroke-width="1"/>
        <text x="380" y="144" text-anchor="middle" fill="#e900ff" font-family="Space Mono" font-size="9" font-weight="700">ARGOCD</text>
        <text x="380" y="160" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">watches git staging branch</text>

        <rect x="286" y="184" width="188" height="50" rx="3" fill="#111318" stroke="#2a2f3a" stroke-width="1"/>
        <text x="380" y="204" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">TRAEFIK</text>
        <text x="380" y="220" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">ingress</text>

        <rect x="286" y="244" width="188" height="70" rx="3" fill="#0e1115" stroke="#1e2229" stroke-width="1"/>
        <text x="380" y="264" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">WORKLOADS</text>
        <rect x="296" y="272" width="78" height="34" rx="2" fill="#111318" stroke="#ffe900" stroke-width="1"/>
        <text x="335" y="292" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">app-v2.0</text>
        <rect x="384" y="272" width="78" height="34" rx="2" fill="#111318" stroke="#2a2f3a"/>
        <text x="423" y="292" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">api</text>

        <rect x="286" y="324" width="188" height="40" rx="3" fill="#0d1015" stroke="#ff8c42" stroke-width="1"/>
        <text x="380" y="348" text-anchor="middle" fill="#ff8c42" font-family="Space Mono" font-size="8">pulls from stub registry</text>

        <rect x="286" y="374" width="188" height="40" rx="3" fill="#0d1015" stroke="#2a2f3a" stroke-width="1"/>
        <text x="380" y="398" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">prometheus + grafana</text>

        <rect x="286" y="424" width="188" height="30" rx="3" fill="#0a1a0a" stroke="#39ff14" stroke-width="1"/>
        <text x="380" y="443" text-anchor="middle" fill="#39ff14" font-family="Space Mono" font-size="8">rancher-agent</text>

        <rect x="286" y="464" width="188" height="46" rx="3" fill="#0d1015" stroke="#2a2f3a" stroke-width="1"/>
        <text x="380" y="481" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">local-path / storage</text>
        <text x="380" y="497" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">coredns</text>

        <!-- cluster prod -->
        <line x1="610" y1="80" x2="610" y2="100" stroke="#1e2229" stroke-width="1"/>

        <rect x="510" y="100" width="230" height="420" rx="6" fill="none" stroke="#1a0a1a" stroke-width="1.5"/>
        <text x="526" y="118" fill="#3a0a5c" font-family="Space Mono" font-size="9" letter-spacing="1">CLUSTER: PRODUCTION</text>

        <rect x="526" y="124" width="198" height="50" rx="3" fill="#120a12" stroke="#e900ff" stroke-width="1.5"/>
        <text x="625" y="144" text-anchor="middle" fill="#e900ff" font-family="Space Mono" font-size="9" font-weight="700">ARGOCD</text>
        <text x="625" y="160" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">watches git tags / release</text>

        <rect x="526" y="184" width="198" height="50" rx="3" fill="#111318" stroke="#2a2f3a" stroke-width="1"/>
        <text x="625" y="204" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">TRAEFIK</text>
        <text x="625" y="220" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">ingress</text>

        <rect x="526" y="244" width="198" height="70" rx="3" fill="#0e1115" stroke="#1e2229" stroke-width="1"/>
        <text x="625" y="264" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="9">WORKLOADS</text>
        <rect x="536" y="272" width="84" height="34" rx="2" fill="#111318" stroke="#39ff14" stroke-width="1"/>
        <text x="578" y="292" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">app-v1.9</text>
        <rect x="630" y="272" width="84" height="34" rx="2" fill="#111318" stroke="#39ff14" stroke-width="1"/>
        <text x="672" y="292" text-anchor="middle" fill="#8892a0" font-family="Space Mono" font-size="9">api-v1.9</text>

        <rect x="526" y="324" width="198" height="40" rx="3" fill="#0d1015" stroke="#ff8c42" stroke-width="1"/>
        <text x="625" y="348" text-anchor="middle" fill="#ff8c42" font-family="Space Mono" font-size="8">pulls from stub registry</text>

        <rect x="526" y="374" width="198" height="40" rx="3" fill="#0d1015" stroke="#2a2f3a" stroke-width="1"/>
        <text x="625" y="398" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">prometheus + grafana + alerts</text>

        <rect x="526" y="424" width="198" height="30" rx="3" fill="#0a1a0a" stroke="#39ff14" stroke-width="1"/>
        <text x="625" y="443" text-anchor="middle" fill="#39ff14" font-family="Space Mono" font-size="8">rancher-agent</text>

        <rect x="526" y="464" width="198" height="46" rx="3" fill="#0d1015" stroke="#2a2f3a" stroke-width="1"/>
        <text x="625" y="481" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">storage / coredns</text>
        <text x="625" y="497" text-anchor="middle" fill="#4a5260" font-family="Space Mono" font-size="8">pod anti-affinity / PDB</text>
      </svg>
    `,
  },

];

// ---- RENDER ----

const tabsEl    = document.getElementById('tabs');
const diagramEl = document.getElementById('diagramPane');
const infoEl    = document.getElementById('infoPane');

function tagHtml(text, color) {
  if (!text || !color) return `<span style="color:var(--text2);font-size:12px">${text||''}</span>`;
  return `<span class="tag tag-${color}">${text}</span>`;
}

function renderArch(arch) {
  // diagram
  diagramEl.innerHTML = `
    <div class="arch-title" style="color:var(--text)">${arch.title}</div>
    <div class="arch-desc">${arch.desc}</div>
    <div class="diagram">${arch.svg}</div>
  `;

  // info pane
  const propsRows = arch.props.map(p => `
    <div class="prop-row">
      <span class="prop-key">${p.k}</span>
      <span class="prop-val">${tagHtml(p.v, p.tag)}</span>
    </div>
  `).join('');

  const useCaseItems = arch.useCases.map(u => `<li>${u}</li>`).join('');
  const noteItems = arch.notes.map(n => `<li>${n}</li>`).join('');

  infoEl.innerHTML = `
    <div class="info-section">
      <div class="info-section-head">properties</div>
      <div class="info-section-body">${propsRows}</div>
    </div>
    <div class="info-section">
      <div class="info-section-head">use cases</div>
      <div class="info-section-body">
        <ul class="use-case-list">${useCaseItems}</ul>
      </div>
    </div>
    <div class="info-section">
      <div class="info-section-head">notes</div>
      <div class="info-section-body">
        <ul class="note-list">${noteItems}</ul>
      </div>
    </div>
  `;
}

function selectTab(id) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelector(`.tab[data-id="${id}"]`).classList.add('active');
  renderArch(archs.find(a => a.id === id));
}

// build tabs
archs.forEach((arch, i) => {
  const tab = document.createElement('div');
  tab.className = 'tab' + (i === 0 ? ' active' : '');
  tab.dataset.id = arch.id;
  const badge = arch.badge
    ? `<span class="badge tag-${arch.badge.color}">${arch.badge.text}</span>`
    : '';
  tab.innerHTML = arch.label + badge;
  tab.addEventListener('click', () => selectTab(arch.id));
  tabsEl.appendChild(tab);
});

// initial render
renderArch(archs[0]);
</script>
</body>
</html>
